# 按键驱动接口说明

## 一、GPIO 配置要求

### WK_UP（PA0）
- 模式：GPIO 输入
- 上下拉：下拉
- 电平逻辑：
  - 1 → 按下
  - 0 → 未按

---

### KEY0 / KEY1 / KEY2（PE4 / PE3 / PE2）
- 模式：GPIO 输入
- 上下拉：上拉
- 电平逻辑：
  - 0 → 按下
  - 1 → 未按

---

## 二、统一返回逻辑

驱动层必须统一语义：

- 返回值 = 按键ID → 表示检测到按键按下
- 返回值 = KEY_NONE → 当前无按键按下

无论硬件电平如何，内部需做转换。

---

## 三、需要实现的函数接口

### 按键扫描函数
key_scan()

### 返回值
- KEY_NONE → 无按键按下
- KEY_WKUP → WK_UP 被按下
- KEY0 → KEY0 被按下
- KEY1 → KEY1 被按下
- KEY2 → KEY2 被按下

---

## 四、软件消抖要求

函数内部必须包含软件消抖处理：

### 消抖规则
- 当检测到按键电平变化时
- 必须等待稳定 ≥ 20ms 才确认按下

---





